{% load static %}
<!DOCTYPE html>
<html lang="ptbr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Conecta Esporte</title>
    
    <!--
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
-->
    <link rel="stylesheet" href="{% static 'secundarios/css/nav.css' %}">
    <link rel="stylesheet" href="{% static 'secundarios/css/visual.css' %}">
    <link rel="stylesheet" href="{% static 'secundarios/css/feed.css' %}">

</head>



<body>

{% include 'secundarios/nav_log.html' %}

<div class="corpo">
    <h2>Novidades</h2>

    <!-- formulário de busca (GET) -->
    <form method="get" action="{% url 'secundarios:feed' %}" style="margin-bottom:12px;">
        <input type="text" name="q" placeholder="Buscar por título, conteúdo ou autor" value="{{ q|default:'' }}" />
        <button type="submit">Buscar</button>
        {% if q %}
            <a href="{% url 'secundarios:feed' %}">Limpar</a>
        {% endif %}
    </form>

    <div class="feed">
      {% for post in posts %}
        <a href="{% url 'secundarios:post' %}?id={{ post.id }}">
          <div class="c2" style="margin-bottom:16px; padding:12px; border:1px solid #ddd;">
              <div style="display:flex; align-items:center; gap:10px;">
                  <img src="{% static 'secundarios/img/icon_perfil.png' %}" style="width:42px;height:42px;">
                  <strong>{{ post.autor }}</strong>
              </div>
              <div style="margin-top:8px;">
                  <div>
                      <h3 style="margin:0;">{{ post.titulo }}</h3>
                  </div>
                  <div>
                      <p style="margin:6px 0;">{{ post.conteudo|linebreaksbr }}</p>
                  </div>
                  <small>Publicado em {{ post.criado_em|date:"d/m/Y H:i" }}</small>
              </div>
          </div>
        </a>
      {% empty %}
        <p>Não há postagens cadastradas.</p>
      {% endfor %}
    </div>
</body>

</html>